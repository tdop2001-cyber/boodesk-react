"use strict";(self.webpackChunkboodesk_react=self.webpackChunkboodesk_react||[]).push([[850],{850:(e,t,s)=>{s.d(t,{fileListService:()=>l});var i=s(8);const o="https://d20101af9dd64057603c4871abeb1b0c.r2.cloudflarestorage.com",r="boodesk-cdn",a="d58b5663e74d84ecebd28a00c5bafaa1",n="f4ae1bb0dae208bda1f51ccc49ffd7ac050fbb0d6eaaffbd1fc8d5f28ca621ef",c=window.AWS;const l=new class{getS3Client(){if("undefined"===typeof c)throw new Error("AWS SDK n\xe3o est\xe1 carregado. Verifique se o script est\xe1 inclu\xeddo no index.html");return c.config.update({accessKeyId:a,secretAccessKey:n,region:"auto"}),new c.S3({endpoint:o,s3ForcePathStyle:!0,signatureVersion:"v4"})}async listFiles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{var s;0,console.log("\ud83d\udd04 Listando arquivos do R2...");const a=this.getS3Client(),n=(0,i.A)({Bucket:r,MaxKeys:t},e&&{Prefix:e}),c=await new Promise((e,t)=>{a.listObjectsV2(n,(s,i)=>{s?t(s):e(i)})});console.log("\u2705 Listagem conclu\xedda:",(null===(s=c.Contents)||void 0===s?void 0:s.length)||0,"arquivos");return{success:!0,files:(c.Contents||[]).map(e=>{const t=e.Key,s=t.includes("/")?t.split("/").pop():t,i=this.isImageFile(s),a=this.isDocumentFile(s),n=this.isArchiveFile(s);return{key:t,name:s,size:e.Size,type:this.getFileType(s),url:"".concat(o,"/").concat(r,"/").concat(t),uploadedAt:new Date(e.LastModified),isImage:i,isDocument:a,isArchive:n}})}}catch(a){return console.error("\u274c Erro ao listar arquivos:",a),{success:!1,error:a instanceof Error?a.message:"Erro desconhecido"}}}async listRootFiles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{const t=await this.listFiles("",e);if(t.success&&t.files){return{success:!0,files:t.files.filter(e=>!e.key.includes("/"))}}return t}catch(t){return{success:!1,error:t instanceof Error?t.message:"Erro ao listar arquivos da raiz"}}}async listFolderFiles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const s=e.endsWith("/")?e:"".concat(e,"/");return this.listFiles(s,t)}isImageFile(e){const t=e.toLowerCase().substring(e.lastIndexOf("."));return[".jpg",".jpeg",".png",".gif",".webp",".bmp",".svg"].includes(t)}isDocumentFile(e){const t=e.toLowerCase().substring(e.lastIndexOf("."));return[".pdf",".doc",".docx",".txt",".rtf",".odt"].includes(t)}isArchiveFile(e){const t=e.toLowerCase().substring(e.lastIndexOf("."));return[".zip",".rar",".7z",".tar",".gz"].includes(t)}getFileType(e){return{".jpg":"image/jpeg",".jpeg":"image/jpeg",".png":"image/png",".gif":"image/gif",".webp":"image/webp",".pdf":"application/pdf",".doc":"application/msword",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".txt":"text/plain",".zip":"application/zip",".rar":"application/x-rar-compressed",".7z":"application/x-7z-compressed"}[e.toLowerCase().substring(e.lastIndexOf("."))]||"application/octet-stream"}formatFileSize(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}formatUploadDate(e){return e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}}}}]);
//# sourceMappingURL=850.d232a8cc.chunk.js.map